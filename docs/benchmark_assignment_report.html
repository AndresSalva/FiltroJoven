<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Informe de Benchmark - Práctica de Algoritmos Genéticos</title>
    <style>
      :root {
        color-scheme: light;
        --bg: #f7f9fb;
        --panel: #ffffff;
        --accent: #1a4a6a;
        --accent-soft: #e4eef6;
        --text: #1f2933;
        --muted: #52606d;
        --table-border: #d0d9e2;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
        line-height: 1.6;
      }
      header {
        background: linear-gradient(120deg, var(--accent), #0f2842);
        color: #fff;
        padding: 3.5rem 2rem;
        text-align: center;
      }
      header h1 {
        margin: 0 0 0.5rem 0;
        font-size: 2.25rem;
        letter-spacing: 0.02em;
      }
      header p {
        margin: 0;
        font-size: 1.05rem;
        color: rgba(255, 255, 255, 0.85);
      }
      main {
        max-width: 960px;
        margin: -40px auto 60px auto;
        padding: 0 24px;
      }
      section {
        background: var(--panel);
        border-radius: 12px;
        padding: 28px 32px;
        margin-bottom: 26px;
        box-shadow: 0 16px 40px rgba(15, 40, 66, 0.08);
      }
      section h2 {
        margin-top: 0;
        color: var(--accent);
        font-size: 1.6rem;
      }
      section h3 {
        color: var(--muted);
        font-size: 1.1rem;
        margin-top: 1.5rem;
      }
      p {
        margin: 0 0 1rem 0;
      }
      ul,
      ol {
        margin: 0 0 1rem 0;
        padding-left: 1.25rem;
      }
      code,
      pre {
        font-family: "Fira Code", "Source Code Pro", Menlo, Consolas, monospace;
      }
      pre {
        background: var(--accent-soft);
        border-radius: 8px;
        padding: 16px;
        overflow-x: auto;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 1rem 0;
        font-size: 0.98rem;
      }
      th,
      td {
        border: 1px solid var(--table-border);
        padding: 10px 12px;
        text-align: left;
        vertical-align: top;
      }
      th {
        background: var(--accent-soft);
        color: var(--accent);
        font-weight: 600;
      }
      .badge {
        display: inline-block;
        background: var(--accent-soft);
        color: var(--accent);
        border-radius: 999px;
        padding: 2px 10px;
        font-size: 0.85rem;
        font-weight: 600;
      }
      footer {
        text-align: center;
        color: var(--muted);
        font-size: 0.9rem;
        padding: 2rem 1rem 3rem 1rem;
      }
      @media (max-width: 640px) {
        header {
          padding: 2.75rem 1.5rem;
        }
        header h1 {
          font-size: 1.9rem;
        }
        section {
          padding: 22px 20px;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Informe de Benchmark</h1>
      <p>Práctica de Algoritmos Genéticos · Filtro de Rejuvenecimiento Facial</p>
    </header>

    <main>
      <section>
        <h2>1. Introducción</h2>
        <p>
          Este informe documenta el experimento completo solicitado en el documento
          <em>practicaGeneticos.pdf</em>. El objetivo fue evaluar de forma sistemática distintas combinaciones de
          operadores genéticos y funciones de aptitud para un filtro de rejuvenecimiento facial basado en un
          algoritmo genético. Además de confirmar el cumplimiento de los requisitos académicos, se analizan de
          manera cuantitativa y cualitativa los resultados, destacando aprendizajes y oportunidades de mejora.
        </p>
      </section>

      <section>
        <h2>2. Cobertura de requisitos</h2>
        <table>
          <thead>
            <tr>
              <th>Requisito del enunciado</th>
              <th>Evidencia</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Representación del individuo y transformación paramétrica</td>
              <td>
                El módulo <code>transformations/face_manipulator.py</code> define <code>PARAM_BOUNDS</code>,
                <code>sample_params</code>, <code>apply_transformation</code> y el motor
                <code>run_genetic_algorithm</code>, cubriendo los pasos 1 a 3 del PDF.
              </td>
            </tr>
            <tr>
              <td>Tres funciones de aptitud distintas</td>
              <td>
                <code>ga/fitness_functions.py</code> implementa <code>original</code>, <code>ideal</code> y
                <code>color</code>, utilizadas tanto de forma independiente como en combinación.
              </td>
            </tr>
            <tr>
              <td>Operadores genéticos variados</td>
              <td>
                <code>ga/selection_operators.py</code>, <code>ga/crossover_operators.py</code> y
                <code>ga/mutation_operators.py</code> incluyen torneo, ruleta, ranking, SUS, cruces single/two/k/uniform
                y mutación gaussiana.
              </td>
            </tr>
            <tr>
              <td>Experimentación sistemática (10 corridas por combinación)</td>
              <td>
                <code>experiments/benchmark.py</code> se ejecutó con <code>--runs 10</code> para las 48 combinaciones,
                generando 480 corridas en total.
              </td>
            </tr>
            <tr>
              <td>Registro de convergencia, aptitud y diversidad</td>
              <td>
                Los archivos
                <code>benchmark_results_assignment/data/ga_benchmark_runs.csv</code> y
                <code>benchmark_results_assignment/data/ga_benchmark_history.csv</code> contienen historiales por
                generación y diversidad poblacional.
              </td>
            </tr>
            <tr>
              <td>Guardado de los mejores individuos</td>
              <td>
                Con <code>--save-images</code> se almacenaron las 480 imágenes finales en
                <code>benchmark_results_assignment/images/</code> (directorio ahora ignorado en Git para evitar peso
                innecesario).
              </td>
            </tr>
            <tr>
              <td>Informe técnico con análisis cuantitativo y cualitativo</td>
              <td>
                Este documento resume los hallazgos, responde las preguntas de discusión y propone mejoras futuras.
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2>3. Metodología y configuración experimental</h2>

        <h3>3.1 Pipeline general</h3>
        <ol>
          <li>Carga de la imagen <code>input_images/tuto.jpg</code> y preprocesamiento de máscaras faciales.</li>
          <li>Ejecución del algoritmo genético con semillas derivadas de <code>base_seed = 1337 + run_id</code>.</li>
          <li>
            Registro de cada corrida: mejor aptitud, parámetros, historiales y diversidad. Generación de CSV, figuras y
            reporte en <code>benchmark_results_assignment/</code>.
          </li>
          <li>
            Análisis estadístico adicional mediante scripts auxiliares en Python (no versionados) para elaborar el
            informe final.
          </li>
        </ol>

        <h3>3.2 Parámetros utilizados</h3>
        <ul>
          <li>Generaciones por corrida: 20</li>
          <li>Tamaño de población: 24 individuos</li>
          <li>Fitness evaluadas: <code>original</code>, <code>ideal</code>, <code>color</code></li>
          <li>
            Selecciones: torneo, ruleta, ranking, SUS · Cruces: single-point, two-point, k-point, uniform · Mutación:
            gaussiana
          </li>
          <li>Corridas por combinación: 10 (480 en total)</li>
          <li>Muestras de calibración para normalización: 40 por fitness</li>
          <li>Almacenamiento de imágenes finales activado (<code>--save-images</code>)</li>
        </ul>

        <h3>3.3 Reproducibilidad</h3>
        <pre><code>python -u experiments/benchmark.py --image tuto.jpg --input-dir input_images `
    --output-dir benchmark_results_assignment --runs 10 --gens 20 --pop 24 `
    --fitness original ideal color `
    --selection tournament roulette rank sus `
    --crossover single_point two_point k_point uniform `
    --mutation gaussian --calibration-samples 40 --save-images
</code></pre>
        <p>
          El directorio <code>benchmark_results_assignment/</code> se regenerará con las mismas rutas y formatos
          descritos en este informe.
        </p>
      </section>

      <section>
        <h2>4. Resultados cuantitativos</h2>

        <h3>4.1 Mejores combinaciones por función de aptitud</h3>
        <table>
          <thead>
            <tr>
              <th>Fitness</th>
              <th>Selección</th>
              <th>Cruce</th>
              <th>mean_cdf</th>
              <th>mean_fitness</th>
              <th>std_fitness</th>
              <th>Diversidad final</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>original</td>
              <td>tournament</td>
              <td>k_point</td>
              <td>0.985661</td>
              <td>153.295160</td>
              <td>0.161633</td>
              <td>2.628680</td>
            </tr>
            <tr>
              <td>ideal</td>
              <td>tournament</td>
              <td>single_point</td>
              <td>0.995080</td>
              <td>29.631846</td>
              <td>0.005472</td>
              <td>2.205006</td>
            </tr>
            <tr>
              <td><strong>color</strong></td>
              <td><strong>tournament</strong></td>
              <td><strong>k_point</strong></td>
              <td><strong>0.993585</strong></td>
              <td><strong>0.795245</strong></td>
              <td><strong>0.001190</strong></td>
              <td><strong>3.630081</strong></td>
            </tr>
          </tbody>
        </table>
        <p>
          Los valores provienen de los registros agregados en
          <code>benchmark_results_assignment/data/ga_benchmark_summary.csv</code>. La selección por torneo domina en las
          tres funciones de aptitud y logra los percentiles normalizados más altos.
        </p>

        <h3>4.2 Rendimiento por operador de selección</h3>
        <table>
          <thead>
            <tr>
              <th>Fitness</th>
              <th>Rank</th>
              <th>Roulette</th>
              <th>SUS</th>
              <th>Tournament</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>color</td>
              <td>0.993546</td>
              <td>0.993444</td>
              <td>0.993440</td>
              <td><strong>0.993555</strong></td>
            </tr>
            <tr>
              <td>ideal</td>
              <td>0.994163</td>
              <td>0.992743</td>
              <td>0.992436</td>
              <td><strong>0.994539</strong></td>
            </tr>
            <tr>
              <td>original</td>
              <td>0.985534</td>
              <td>0.985035</td>
              <td>0.984630</td>
              <td><strong>0.985638</strong></td>
            </tr>
          </tbody>
        </table>

        <h3>4.3 Rendimiento por operador de cruce</h3>
        <table>
          <thead>
            <tr>
              <th>Fitness</th>
              <th>k_point</th>
              <th>single_point</th>
              <th>two_point</th>
              <th>uniform</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>color</td>
              <td>0.993499</td>
              <td><strong>0.993509</strong></td>
              <td>0.993496</td>
              <td>0.993481</td>
            </tr>
            <tr>
              <td>ideal</td>
              <td>0.993961</td>
              <td>0.993717</td>
              <td>0.991545</td>
              <td><strong>0.994657</strong></td>
            </tr>
            <tr>
              <td>original</td>
              <td><strong>0.985218</strong></td>
              <td>0.985410</td>
              <td>0.985014</td>
              <td>0.985195</td>
            </tr>
          </tbody>
        </table>

        <h3>4.4 Top cinco combinaciones globales</h3>
        <p>
          Las cinco primeras posiciones en <code>mean_cdf</code> corresponden a la función <strong>ideal</strong>, todas
          ellas con valores superiores a 0.995. Destacan las configuraciones con selección por torneo y cruces
          single-point o uniform por su mínima desviación estándar.
        </p>

        <h3>4.5 Tiempos de ejecución y convergencia</h3>
        <table>
          <thead>
            <tr>
              <th>Fitness</th>
              <th>Duración media (s)</th>
              <th>Desv. estándar (s)</th>
              <th>Generación estable (media)</th>
              <th>Desv. generación</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>color</td>
              <td>43.69</td>
              <td>10.83</td>
              <td>17.49</td>
              <td>3.20</td>
            </tr>
            <tr>
              <td>ideal</td>
              <td>28.51</td>
              <td>11.90</td>
              <td>17.13</td>
              <td>2.86</td>
            </tr>
            <tr>
              <td>original</td>
              <td>89.35</td>
              <td>9.19</td>
              <td>18.15</td>
              <td>2.71</td>
            </tr>
          </tbody>
        </table>

        <h3>4.6 Diversidad poblacional</h3>
        <table>
          <thead>
            <tr>
              <th>Fitness</th>
              <th>Diversidad media</th>
              <th>Desv. estándar</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>color</td>
              <td>5.224</td>
              <td>1.823</td>
            </tr>
            <tr>
              <td>ideal</td>
              <td>5.281</td>
              <td>2.532</td>
            </tr>
            <tr>
              <td>original</td>
              <td>5.870</td>
              <td>2.976</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <h2>5. Observaciones cualitativas</h2>
        <ul>
          <li>
            <strong>Función <code>color</code> (torneo + k_point)</strong>: es la configuración que entrega los mejores
            resultados visuales. Ilumina la piel, atenúa manchas y homogeneiza el tono sin sacrificar brillo en ojos y
            labios. La serie completa mantiene un acabado agradable y “juvenil”, por lo que se recomienda como
            referencia principal para la presentación.
          </li>
          <li>
            <strong>Función <code>ideal</code> (torneo + single_point)</strong>: genera piel uniforme y respeta detalles
            finos; sin embargo, se percibe ligeramente más “plana” frente al dinamismo cromático de
            <code>color</code>. Sigue siendo una alternativa muy estable.
          </li>
          <li>
            <strong>Función <code>original</code> (torneo + k_point)</strong>: preserva estructuras y evita artefactos
            severos, aunque deja cierta textura residual en zonas con alto detalle (ej. arrugas finas). Refleja el
            balance entre suavizado y nitidez.
          </li>
        </ul>
      </section>

      <section>
        <h2>6. Discusión respecto al enunciado</h2>
        <ol>
          <li>
            <strong>¿Qué función produjo el mejor resultado visual?</strong> La función
            <code>color</code> con selección por torneo y cruce k-point es la más atractiva a simple vista. Mantiene
            percentiles altos (0.9936 en promedio) y ofrece un acabado luminoso y natural.
          </li>
          <li>
            <strong>Influencia de los operadores genéticos:</strong> torneo acelera la convergencia y reduce la
            varianza; los cruces multipunto favorecen <code>color</code> y <code>original</code>, mientras que
            <code>ideal</code> se beneficia de single-point/uniform. Ruleta y SUS introducen más dispersión.
          </li>
          <li>
            <strong>Limitaciones del enfoque:</strong> tiempo elevado con métricas complejas, alta dependencia del
            diseño de la aptitud, naturaleza estocástica y ausencia de exageraciones caricaturescas.
          </li>
          <li>
            <strong>Mejoras futuras:</strong> integrar landmarks faciales, explorar tasas de mutación adaptativas o
            enfoques multiobjetivo, optimizar costes mediante caché/muestreo e incorporar evaluaciones subjetivas.
          </li>
        </ol>
      </section>

      <section>
        <h2>7. Conclusiones y recomendaciones</h2>
        <ul>
          <li>
            El benchmark ejecutado en <code>benchmark_results_assignment/</code> cumple íntegramente los requisitos:
            tres funciones, cuatro selecciones, cuatro cruces, diez corridas por combinación, métricas completas y
            evidencia visual.
          </li>
          <li>
            La configuración preferida para una entrega visual es
            <span class="badge">color + tournament + k_point</span>; combina acabado estético convincente con estabilidad
            estadística. Como alternativa con énfasis en suavizado uniforme se mantiene
            <code>ideal + tournament + single_point</code> (o <code>uniform</code>).
          </li>
          <li>
            Para iteraciones rápidas se sugiere bajar <code>--runs</code>, <code>--gens</code> o prescindir temporalmente
            de <code>--save-images</code>. Para informes finales, mantener los valores documentados garantiza resultados
            consistentes.
          </li>
          <li>
            Las imágenes generadas se conservan localmente (no versionadas) y deben incluirse como anexo visual o
            carpeta comprimida en la entrega final.
          </li>
        </ul>
      </section>

      <section>
        <h2>8. Artefactos generados</h2>
        <ul>
          <li>
            <strong>Datos (CSV):</strong>
            <ul>
              <li><code>benchmark_results_assignment/data/ga_benchmark_runs.csv</code></li>
              <li><code>benchmark_results_assignment/data/ga_benchmark_summary.csv</code></li>
              <li><code>benchmark_results_assignment/data/ga_benchmark_history.csv</code></li>
            </ul>
          </li>
          <li>
            <strong>Figuras (PNG):</strong>
            <ul>
              <li><code>benchmark_results_assignment/figures/fitness_boxplot_cdf.png</code></li>
              <li><code>benchmark_results_assignment/figures/heatmap_*.png</code></li>
              <li><code>benchmark_results_assignment/figures/convergence_*_cdf.png</code> y
                <code>convergence_all_cdf.png</code></li>
              <li><code>benchmark_results_assignment/figures/diversity_*.png</code></li>
            </ul>
          </li>
          <li>
            <strong>Reporte autogenerado:</strong> <code>benchmark_results_assignment/reports/benchmark_report.md</code>
          </li>
          <li>
            <strong>Imágenes finales:</strong> <code>benchmark_results_assignment/images/&lt;fitness&gt;/...</code>
            (guardadas localmente y reproducibles ejecutando el benchmark).
          </li>
        </ul>
      </section>
    </main>

    <footer>
      Informe generado para la Práctica de Algoritmos Genéticos · Octubre 2025
    </footer>
  </body>
</html>
